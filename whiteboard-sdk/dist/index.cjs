"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const C=require("react");function Rr(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const m=Rr(C);var ht={exports:{}},Ye={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nt;function _r(){if(Nt)return Ye;Nt=1;var e=C,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,g){var E,u={},_=null,k=null;g!==void 0&&(_=""+g),c.key!==void 0&&(_=""+c.key),c.ref!==void 0&&(k=c.ref);for(E in c)n.call(c,E)&&!a.hasOwnProperty(E)&&(u[E]=c[E]);if(l&&l.defaultProps)for(E in c=l.defaultProps,c)u[E]===void 0&&(u[E]=c[E]);return{$$typeof:t,type:l,key:_,ref:k,props:u,_owner:s.current}}return Ye.Fragment=r,Ye.jsx=o,Ye.jsxs=o,Ye}var Ge={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt;function kr(){return Mt||(Mt=1,process.env.NODE_ENV!=="production"&&function(){var e=C,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),T=Symbol.iterator,b="@@iterator";function X(i){if(i===null||typeof i!="object")return null;var h=T&&i[T]||i[b];return typeof h=="function"?h:null}var O=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function N(i){{for(var h=arguments.length,p=new Array(h>1?h-1:0),y=1;y<h;y++)p[y-1]=arguments[y];Y("error",i,p)}}function Y(i,h,p){{var y=O.ReactDebugCurrentFrame,D=y.getStackAddendum();D!==""&&(h+="%s",p=p.concat([D]));var U=p.map(function(P){return String(P)});U.unshift("Warning: "+h),Function.prototype.apply.call(console[i],console,U)}}var re=!1,w=!1,F=!1,v=!1,se=!1,G;G=Symbol.for("react.module.reference");function H(i){return!!(typeof i=="string"||typeof i=="function"||i===n||i===a||se||i===s||i===g||i===E||v||i===k||re||w||F||typeof i=="object"&&i!==null&&(i.$$typeof===_||i.$$typeof===u||i.$$typeof===o||i.$$typeof===l||i.$$typeof===c||i.$$typeof===G||i.getModuleId!==void 0))}function z(i,h,p){var y=i.displayName;if(y)return y;var D=h.displayName||h.name||"";return D!==""?p+"("+D+")":p}function ce(i){return i.displayName||"Context"}function B(i){if(i==null)return null;if(typeof i.tag=="number"&&N("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case n:return"Fragment";case r:return"Portal";case a:return"Profiler";case s:return"StrictMode";case g:return"Suspense";case E:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case l:var h=i;return ce(h)+".Consumer";case o:var p=i;return ce(p._context)+".Provider";case c:return z(i,i.render,"ForwardRef");case u:var y=i.displayName||null;return y!==null?y:B(i.type)||"Memo";case _:{var D=i,U=D._payload,P=D._init;try{return B(P(U))}catch{return null}}}return null}var ne=Object.assign,me=0,Ce,M,K,j,W,A,L;function S(){}S.__reactDisabledLog=!0;function V(){{if(me===0){Ce=console.log,M=console.info,K=console.warn,j=console.error,W=console.group,A=console.groupCollapsed,L=console.groupEnd;var i={configurable:!0,enumerable:!0,value:S,writable:!0};Object.defineProperties(console,{info:i,log:i,warn:i,error:i,group:i,groupCollapsed:i,groupEnd:i})}me++}}function ue(){{if(me--,me===0){var i={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ne({},i,{value:Ce}),info:ne({},i,{value:M}),warn:ne({},i,{value:K}),error:ne({},i,{value:j}),group:ne({},i,{value:W}),groupCollapsed:ne({},i,{value:A}),groupEnd:ne({},i,{value:L})})}me<0&&N("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var J=O.ReactCurrentDispatcher,ie;function fe(i,h,p){{if(ie===void 0)try{throw Error()}catch(D){var y=D.stack.trim().match(/\n( *(at )?)/);ie=y&&y[1]||""}return`
`+ie+i}}var Re=!1,x;{var $=typeof WeakMap=="function"?WeakMap:Map;x=new $}function Q(i,h){if(!i||Re)return"";{var p=x.get(i);if(p!==void 0)return p}var y;Re=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var U;U=J.current,J.current=null,V();try{if(h){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(ge){y=ge}Reflect.construct(i,[],P)}else{try{P.call()}catch(ge){y=ge}i.call(P.prototype)}}else{try{throw Error()}catch(ge){y=ge}i()}}catch(ge){if(ge&&y&&typeof ge.stack=="string"){for(var I=ge.stack.split(`
`),de=y.stack.split(`
`),ee=I.length-1,te=de.length-1;ee>=1&&te>=0&&I[ee]!==de[te];)te--;for(;ee>=1&&te>=0;ee--,te--)if(I[ee]!==de[te]){if(ee!==1||te!==1)do if(ee--,te--,te<0||I[ee]!==de[te]){var be=`
`+I[ee].replace(" at new "," at ");return i.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",i.displayName)),typeof i=="function"&&x.set(i,be),be}while(ee>=1&&te>=0);break}}}finally{Re=!1,J.current=U,ue(),Error.prepareStackTrace=D}var De=i?i.displayName||i.name:"",Oe=De?fe(De):"";return typeof i=="function"&&x.set(i,Oe),Oe}function Me(i,h,p){return Q(i,!1)}function oe(i){var h=i.prototype;return!!(h&&h.isReactComponent)}function ve(i,h,p){if(i==null)return"";if(typeof i=="function")return Q(i,oe(i));if(typeof i=="string")return fe(i);switch(i){case g:return fe("Suspense");case E:return fe("SuspenseList")}if(typeof i=="object")switch(i.$$typeof){case c:return Me(i.render);case u:return ve(i.type,h,p);case _:{var y=i,D=y._payload,U=y._init;try{return ve(U(D),h,p)}catch{}}}return""}var Ae=Object.prototype.hasOwnProperty,qe={},Ke=O.ReactDebugCurrentFrame;function xe(i){if(i){var h=i._owner,p=ve(i.type,i._source,h?h.type:null);Ke.setExtraStackFrame(p)}else Ke.setExtraStackFrame(null)}function je(i,h,p,y,D){{var U=Function.call.bind(Ae);for(var P in i)if(U(i,P)){var I=void 0;try{if(typeof i[P]!="function"){var de=Error((y||"React class")+": "+p+" type `"+P+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[P]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw de.name="Invariant Violation",de}I=i[P](h,P,y,p,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ee){I=ee}I&&!(I instanceof Error)&&(xe(D),N("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",y||"React class",p,P,typeof I),xe(null)),I instanceof Error&&!(I.message in qe)&&(qe[I.message]=!0,xe(D),N("Failed %s type: %s",p,I.message),xe(null))}}}var Fe=Array.isArray;function Ne(i){return Fe(i)}function Je(i){{var h=typeof Symbol=="function"&&Symbol.toStringTag,p=h&&i[Symbol.toStringTag]||i.constructor.name||"Object";return p}}function nr(i){try{return vt(i),!1}catch{return!0}}function vt(i){return""+i}function bt(i){if(nr(i))return N("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Je(i)),vt(i)}var wt=O.ReactCurrentOwner,ir={key:!0,ref:!0,__self:!0,__source:!0},Ct,Rt;function ar(i){if(Ae.call(i,"ref")){var h=Object.getOwnPropertyDescriptor(i,"ref").get;if(h&&h.isReactWarning)return!1}return i.ref!==void 0}function sr(i){if(Ae.call(i,"key")){var h=Object.getOwnPropertyDescriptor(i,"key").get;if(h&&h.isReactWarning)return!1}return i.key!==void 0}function or(i,h){typeof i.ref=="string"&&wt.current}function lr(i,h){{var p=function(){Ct||(Ct=!0,N("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};p.isReactWarning=!0,Object.defineProperty(i,"key",{get:p,configurable:!0})}}function cr(i,h){{var p=function(){Rt||(Rt=!0,N("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",h))};p.isReactWarning=!0,Object.defineProperty(i,"ref",{get:p,configurable:!0})}}var ur=function(i,h,p,y,D,U,P){var I={$$typeof:t,type:i,key:h,ref:p,props:P,_owner:U};return I._store={},Object.defineProperty(I._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(I,"_self",{configurable:!1,enumerable:!1,writable:!1,value:y}),Object.defineProperty(I,"_source",{configurable:!1,enumerable:!1,writable:!1,value:D}),Object.freeze&&(Object.freeze(I.props),Object.freeze(I)),I};function dr(i,h,p,y,D){{var U,P={},I=null,de=null;p!==void 0&&(bt(p),I=""+p),sr(h)&&(bt(h.key),I=""+h.key),ar(h)&&(de=h.ref,or(h,D));for(U in h)Ae.call(h,U)&&!ir.hasOwnProperty(U)&&(P[U]=h[U]);if(i&&i.defaultProps){var ee=i.defaultProps;for(U in ee)P[U]===void 0&&(P[U]=ee[U])}if(I||de){var te=typeof i=="function"?i.displayName||i.name||"Unknown":i;I&&lr(P,te),de&&cr(P,te)}return ur(i,I,de,D,y,wt.current,P)}}var it=O.ReactCurrentOwner,_t=O.ReactDebugCurrentFrame;function He(i){if(i){var h=i._owner,p=ve(i.type,i._source,h?h.type:null);_t.setExtraStackFrame(p)}else _t.setExtraStackFrame(null)}var at;at=!1;function st(i){return typeof i=="object"&&i!==null&&i.$$typeof===t}function kt(){{if(it.current){var i=B(it.current.type);if(i)return`

Check the render method of \``+i+"`."}return""}}function hr(i){return""}var Tt={};function fr(i){{var h=kt();if(!h){var p=typeof i=="string"?i:i.displayName||i.name;p&&(h=`

Check the top-level render call using <`+p+">.")}return h}}function Lt(i,h){{if(!i._store||i._store.validated||i.key!=null)return;i._store.validated=!0;var p=fr(h);if(Tt[p])return;Tt[p]=!0;var y="";i&&i._owner&&i._owner!==it.current&&(y=" It was passed a child from "+B(i._owner.type)+"."),He(i),N('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',p,y),He(null)}}function yt(i,h){{if(typeof i!="object")return;if(Ne(i))for(var p=0;p<i.length;p++){var y=i[p];st(y)&&Lt(y,h)}else if(st(i))i._store&&(i._store.validated=!0);else if(i){var D=X(i);if(typeof D=="function"&&D!==i.entries)for(var U=D.call(i),P;!(P=U.next()).done;)st(P.value)&&Lt(P.value,h)}}}function gr(i){{var h=i.type;if(h==null||typeof h=="string")return;var p;if(typeof h=="function")p=h.propTypes;else if(typeof h=="object"&&(h.$$typeof===c||h.$$typeof===u))p=h.propTypes;else return;if(p){var y=B(h);je(p,i.props,"prop",y,i)}else if(h.PropTypes!==void 0&&!at){at=!0;var D=B(h);N("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",D||"Unknown")}typeof h.getDefaultProps=="function"&&!h.getDefaultProps.isReactClassApproved&&N("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Er(i){{for(var h=Object.keys(i.props),p=0;p<h.length;p++){var y=h[p];if(y!=="children"&&y!=="key"){He(i),N("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",y),He(null);break}}i.ref!==null&&(He(i),N("Invalid attribute `ref` supplied to `React.Fragment`."),He(null))}}var St={};function xt(i,h,p,y,D,U){{var P=H(i);if(!P){var I="";(i===void 0||typeof i=="object"&&i!==null&&Object.keys(i).length===0)&&(I+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var de=hr();de?I+=de:I+=kt();var ee;i===null?ee="null":Ne(i)?ee="array":i!==void 0&&i.$$typeof===t?(ee="<"+(B(i.type)||"Unknown")+" />",I=" Did you accidentally export a JSX literal instead of a component?"):ee=typeof i,N("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ee,I)}var te=dr(i,h,p,D,U);if(te==null)return te;if(P){var be=h.children;if(be!==void 0)if(y)if(Ne(be)){for(var De=0;De<be.length;De++)yt(be[De],i);Object.freeze&&Object.freeze(be)}else N("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else yt(be,i)}if(Ae.call(h,"key")){var Oe=B(i),ge=Object.keys(h).filter(function(Cr){return Cr!=="key"}),ot=ge.length>0?"{key: someKey, "+ge.join(": ..., ")+": ...}":"{key: someKey}";if(!St[Oe+ot]){var wr=ge.length>0?"{"+ge.join(": ..., ")+": ...}":"{}";N(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ot,Oe,wr,Oe),St[Oe+ot]=!0}}return i===n?Er(te):gr(te),te}}function mr(i,h,p){return xt(i,h,p,!0)}function pr(i,h,p){return xt(i,h,p,!1)}var vr=pr,br=mr;Ge.Fragment=n,Ge.jsx=vr,Ge.jsxs=br}()),Ge}process.env.NODE_ENV==="production"?ht.exports=_r():ht.exports=kr();var f=ht.exports,ye=(e=>(e[e.SELECTION=0]="SELECTION",e[e.PAINT=1]="PAINT",e[e.ERASE=2]="ERASE",e))(ye||{}),q=(e=>(e[e.DRAWING=0]="DRAWING",e[e.MOVING=1]="MOVING",e[e.RESIZING=2]="RESIZING",e[e.PANNING=3]="PANNING",e[e.CREATING_TEXTBOX=4]="CREATING_TEXTBOX",e[e.ERASING=5]="ERASING",e))(q||{}),d=(e=>(e.LINE="LINE",e.RECTANGLE="RECTANGLE",e.ELLIPSE="ELLIPSE",e.TRIANGLE="TRIANGLE",e.CIRCLE="CIRCLE",e.PENCIL="PENCIL",e.PEN="PEN",e.BRUSH="BRUSH",e.ERASER="ERASER",e.TEXT="TEXT",e))(d||{}),he=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_LEFT=2]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",e))(he||{}),le=(e=>(e.MOUSE="MOUSE",e.SHAPE="SHAPE",e.ERASER="ERASER",e.PENCIL="PENCIL",e.TEXT="TEXT",e.LINK="LINK",e.SELECT="SELECT",e))(le||{}),Ee=(e=>(e.ARIAL="Arial",e.TIMES_NEW_ROMAN="Times New Roman",e.VERDANA="Verdana",e.COURIER_NEW="Courier New",e))(Ee||{});const Tr=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_1044_6783)"},m.createElement("path",{d:"M8 11H12.5C13.163 11 13.7989 10.7366 14.2678 10.2678C14.7366 9.79893 15 9.16304 15 8.5C15 7.83696 14.7366 7.20107 14.2678 6.73223C13.7989 6.26339 13.163 6 12.5 6H8V11ZM18 15.5C18 16.0909 17.8836 16.6761 17.6575 17.2221C17.4313 17.768 17.0998 18.2641 16.682 18.682C16.2641 19.0998 15.768 19.4313 15.2221 19.6575C14.6761 19.8836 14.0909 20 13.5 20H6V4H12.5C13.381 4.00004 14.2425 4.25865 14.9779 4.74378C15.7132 5.2289 16.29 5.9192 16.6367 6.72907C16.9834 7.53894 17.0847 8.43276 16.9282 9.29969C16.7716 10.1666 16.3641 10.9685 15.756 11.606C16.4386 12.0013 17.0053 12.5692 17.3992 13.2526C17.7931 13.9361 18.0003 14.7112 18 15.5ZM8 13V18H13.5C14.163 18 14.7989 17.7366 15.2678 17.2678C15.7366 16.7989 16 16.163 16 15.5C16 14.837 15.7366 14.2011 15.2678 13.7322C14.7989 13.2634 14.163 13 13.5 13H8Z",fill:"white"})),m.createElement("defs",null,m.createElement("clipPath",{id:"clip0_1044_6783"},m.createElement("rect",{width:24,height:24,fill:"white"})))),Lr=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z",stroke:"white",strokeWidth:1.5,strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),yr=e=>m.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M28.04 29.333H18.6533C18.0933 29.333 17.6533 28.8797 17.6533 28.333C17.6533 27.7863 18.1067 27.333 18.6533 27.333H28.04C28.6 27.333 29.04 27.7863 29.04 28.333C29.04 28.8797 28.6 29.333 28.04 29.333Z",fill:"white"}),m.createElement("path",{opacity:.4,d:"M20.5468 21.7871L14.2135 28.1204C12.7335 29.6004 10.3602 29.6804 8.78686 28.3604C8.69353 28.2804 8.61352 28.2004 8.53352 28.1204L7.37353 26.9604L4.98681 24.5738L3.84016 23.4271C3.74683 23.3338 3.66683 23.2404 3.58683 23.1471C2.28016 21.5738 2.3735 19.2271 3.84016 17.7604L8.76017 12.8538L10.1735 11.4404L20.5468 21.7871Z",fill:"white"}),m.createElement("path",{d:"M28.16 14.1866L20.5466 21.7866L10.1733 11.4399L17.7867 3.83992C19.3467 2.27992 21.9066 2.27992 23.4666 3.83992L28.16 8.51992C29.72 10.0799 29.72 12.6266 28.16 14.1866Z",fill:"white"})),Sr=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_1044_6786)"},m.createElement("path",{d:"M15 20H7V18H9.927L12.043 6H9V4H17V6H14.073L11.957 18H15V20Z",fill:"white"})),m.createElement("defs",null,m.createElement("clipPath",{id:"clip0_1044_6786"},m.createElement("rect",{width:24,height:24,fill:"white"})))),xr=e=>m.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{opacity:.4,d:"M7.94663 22.5201L3.9333 10.4935C2.1333 5.09347 5.07996 2.16013 10.48 3.9468L22.5066 7.96013C30.6 10.6535 30.6 15.0801 22.5066 17.7735L18.9333 18.9601L17.7466 22.5335C15.0666 30.6135 10.6533 30.6135 7.94663 22.5201Z",fill:"white"}),m.createElement("path",{d:"M15.5067 15.8398L10.4133 10.7598L15.5067 15.8398Z",fill:"white"}),m.createElement("path",{d:"M16.5067 15.8402C16.5067 16.0936 16.4134 16.3469 16.2134 16.5469C15.8267 16.9336 15.1867 16.9336 14.8001 16.5469L9.70675 11.4802C9.32008 11.0936 9.32008 10.4536 9.70675 10.0669C10.0934 9.68025 10.7334 9.68025 11.1201 10.0669L16.2134 15.1336C16.4001 15.3336 16.5067 15.5869 16.5067 15.8402Z",fill:"white"})),Nr=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_1281_5386)"},m.createElement("path",{d:"M9.87007 21.9996H14.1601C15.7801 21.9996 16.8501 20.8396 16.5301 19.4296L15.8401 16.3496H8.20007L7.51007 19.4296C7.20007 20.7596 8.34007 21.9996 9.87007 21.9996Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M15.8299 16.3501L18.7699 13.7401C20.4099 12.2801 20.4799 11.2601 19.1799 9.61012L13.9899 3.03012C12.8999 1.65012 11.1199 1.65012 10.0199 3.03012L4.83989 9.61012C3.53989 11.2601 3.53989 12.3301 5.24989 13.7401L8.18989 16.3501",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M12.01 2.66992V6.96992",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),m.createElement("defs",null,m.createElement("clipPath",{id:"clip0_1281_5386"},m.createElement("rect",{width:24,height:24,fill:"white"})))),Mr=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_1281_5393)"},m.createElement("path",{d:"M9.5 19.5V18H4.5C3.95 18 3.45 17.78 3.09 17.41C2.72 17.05 2.5 16.55 2.5 16C2.5 14.97 3.3 14.11 4.31 14.01C4.37 14 4.43 14 4.5 14H19.5C19.57 14 19.63 14 19.69 14.01C20.17 14.05 20.59 14.26 20.91 14.59C21.32 14.99 21.54 15.56 21.49 16.18C21.4 17.23 20.45 18 19.39 18H14.5V19.5C14.5 20.88 13.38 22 12 22C10.62 22 9.5 20.88 9.5 19.5Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M20.1699 5.3L19.6899 14.01C19.6299 14 19.5699 14 19.4999 14H4.49992C4.42992 14 4.36992 14 4.30992 14.01L3.82992 5.3C3.64992 3.53 5.03992 2 6.80992 2H17.1899C18.9599 2 20.3499 3.53 20.1699 5.3Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M7.98999 2V7",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M12 2V4",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),m.createElement("defs",null,m.createElement("clipPath",{id:"clip0_1281_5393"},m.createElement("rect",{width:24,height:24,fill:"white"})))),Ar=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M21.81 3.93988C20.27 7.77988 16.41 12.9999 13.18 15.5899L11.21 17.1699C10.96 17.3499 10.71 17.5099 10.43 17.6199C10.43 17.4399 10.42 17.2399 10.39 17.0499C10.28 16.2099 9.90002 15.4299 9.23002 14.7599C8.55002 14.0799 7.72002 13.6799 6.87002 13.5699C6.67002 13.5599 6.47002 13.5399 6.27002 13.5599C6.38002 13.2499 6.55002 12.9599 6.76002 12.7199L8.32002 10.7499C10.9 7.51988 16.14 3.63988 19.97 2.10988C20.56 1.88988 21.13 2.04988 21.49 2.41988C21.87 2.78988 22.05 3.35988 21.81 3.93988Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M10.43 17.6198C10.43 18.7198 10.01 19.7698 9.22003 20.5698C8.61003 21.1798 7.78003 21.5998 6.79003 21.7298L4.33003 21.9998C2.99003 22.1498 1.84003 21.0098 2.00003 19.6498L2.27003 17.1898C2.51003 14.9998 4.34003 13.5998 6.28003 13.5598C6.48003 13.5498 6.69003 13.5598 6.88003 13.5698C7.73003 13.6798 8.56003 14.0698 9.24003 14.7598C9.91003 15.4298 10.29 16.2098 10.4 17.0498C10.41 17.2398 10.43 17.4298 10.43 17.6198Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M14.24 14.4702C14.24 11.8602 12.12 9.74023 9.51001 9.74023",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Ir=e=>m.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M29.08 5.25313C27.3333 9.61313 23.3467 15.3065 19.5467 19.0265C19 15.5865 16.2533 12.8931 12.7867 12.4131C16.52 8.59979 22.2533 4.55979 26.6267 2.79979C27.4 2.50646 28.1733 2.73313 28.6533 3.21313C29.16 3.71979 29.4 4.47979 29.08 5.25313Z",fill:"white"}),m.createElement("path",{opacity:.4,d:"M19.5467 19.0264C18.88 19.6798 18.2133 20.2798 17.5733 20.7864L14.9467 22.8931C14.6133 23.1331 14.28 23.3331 13.9067 23.4931C13.9067 23.2398 13.88 22.9864 13.8533 22.7198C13.7067 21.6131 13.2 20.5598 12.3067 19.6664C11.3867 18.7598 10.2933 18.2398 9.16 18.0931C8.89333 18.0664 8.61333 18.0531 8.36 18.0664C8.50667 17.6531 8.73333 17.2664 9.01333 16.9464L11.0933 14.3198C11.5867 13.6931 12.16 13.0531 12.7867 12.4131C16.2533 12.8931 19 15.5864 19.5467 19.0264Z",fill:"white"}),m.createElement("path",{d:"M13.9067 23.4934C13.9067 24.9601 13.3467 26.3601 12.28 27.4134C11.4667 28.2401 10.3733 28.8001 9.04 28.9601L5.77333 29.3201C3.98666 29.5201 2.45333 27.9868 2.65333 26.1868L3.01333 22.9068C3.33333 19.9868 5.77333 18.1201 8.36 18.0668C8.61333 18.0534 8.89333 18.0668 9.16 18.0934C10.2933 18.2401 11.3867 18.7601 12.3067 19.6668C13.2 20.5601 13.7067 21.6134 13.8533 22.7201C13.88 22.9868 13.9067 23.2401 13.9067 23.4934Z",fill:"white"})),Pr=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M14.8901 5.08039C14.0201 4.82039 13.0601 4.65039 12.0001 4.65039C7.21008 4.65039 3.33008 8.53039 3.33008 13.3204C3.33008 18.1204 7.21008 22.0004 12.0001 22.0004C16.7901 22.0004 20.6701 18.1204 20.6701 13.3304C20.6701 11.5504 20.1301 9.89039 19.2101 8.51039",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M16.13 5.32L13.24 2",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M16.13 5.32031L12.76 7.78031",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Vt={strokeWidth:15,strokeColor:"black",drawingForm:d.PEN,cursorMode:ye.PAINT,fontSize:24,lineHeight:25,fontFamily:Ee.ARIAL},We=1280,ze=720,jr=30,Or=["red","skyblue","black","green","cyan","blue","yellow","orange"],lt=80/window.devicePixelRatio,Fr=e=>m.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M17.9065 19.9999H5.86647C3.4398 19.9999 1.89313 17.4 3.06646 15.2666L6.17313 9.61326L9.0798 4.31992C10.2931 2.11992 13.4665 2.11992 14.6798 4.31992L17.5998 9.61326L18.9998 12.1599L20.7065 15.2666C21.8798 17.4 20.3331 19.9999 17.9065 19.9999Z",fill:"white"}),m.createElement("path",{opacity:.4,d:"M29.3333 20.6667C29.3333 25.4533 25.4533 29.3333 20.6667 29.3333C15.88 29.3333 12 25.4533 12 20.6667C12 20.44 12.0133 20.2267 12.0267 20H17.9067C20.3333 20 21.88 17.4 20.7067 15.2667L19 12.16C19.5333 12.0533 20.0933 12 20.6667 12C25.4533 12 29.3333 15.88 29.3333 20.6667Z",fill:"white"})),Hr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAAMCAYAAABcBTDwAAAAf0lEQVR4Ae3TUQoCIRCAYfUief8LeRyDoIiKKJjddfX7XnSGef1zAnbVWqtPY315H/9SyuW+6L2/3eWca07AV5HBpWACZjojBxdNwBxupeCiCZi/CW4cAl6A4OYl4AEJjl8JOIDgOMqSAQuOWZwiYMHBZ5sELDjYxy1gwcE5XQGLdE6FasIDcAAAAABJRU5ErkJggg==",Dr=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M9.3 21H14.7C19.2 21 21 19.2 21 14.7V9.3C21 4.8 19.2 3 14.7 3H9.3C4.8 3 3 4.8 3 9.3V14.7C3 19.2 4.8 21 9.3 21Z",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Xr=e=>m.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{opacity:.4,d:"M29.3332 10.4137V21.587C29.3332 26.4403 26.4398 29.3337 21.5865 29.3337H10.4132C10.1465 29.3337 9.87984 29.3203 9.6265 29.307C7.9865 29.2003 6.59984 28.7337 5.5065 27.9337C4.9465 27.547 4.45317 27.0537 4.0665 26.4937C3.1465 25.227 2.6665 23.5737 2.6665 21.587V10.4137C2.6665 5.82699 5.25317 2.98699 9.6265 2.70699C9.87984 2.68033 10.1465 2.66699 10.4132 2.66699H21.5865C23.5732 2.66699 25.2265 3.14699 26.4932 4.06699C27.0532 4.45366 27.5465 4.94699 27.9332 5.50699C28.8532 6.77366 29.3332 8.42699 29.3332 10.4137Z",fill:"white"}),m.createElement("path",{d:"M22.2267 7.51953H9.77333C8.24 7.51953 7 8.75953 7 10.2929V11.8662C7 12.4129 7.45333 12.8662 8 12.8662C8.54667 12.8662 9 12.4129 9 11.8662V10.2929C9 9.8662 9.34667 9.51953 9.77333 9.51953H15V22.4795H12.6267C12.08 22.4795 11.6267 22.9329 11.6267 23.4795C11.6267 24.0262 12.08 24.4795 12.6267 24.4795H19.3867C19.9333 24.4795 20.3867 24.0262 20.3867 23.4795C20.3867 22.9329 19.9333 22.4795 19.3867 22.4795H17.0133V9.51953H22.24C22.6667 9.51953 23.0133 9.8662 23.0133 10.2929V11.8662C23.0133 12.4129 23.4667 12.8662 24.0133 12.8662C24.56 12.8662 25.0133 12.4129 25.0133 11.8662V10.2929C25 8.77286 23.76 7.51953 22.2267 7.51953Z",fill:"white"})),Wr=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M4 12.0004V8.44038C4 4.02038 7.13 2.21038 10.96 4.42038L14.05 6.20038L17.14 7.98038C20.97 10.1904 20.97 13.8104 17.14 16.0204L14.05 17.8004L10.96 19.5804C7.13 21.7904 4 19.9804 4 15.5604V12.0004Z",stroke:"white",strokeWidth:1.5,strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})),Yr=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M9.11008 5.08039C9.98008 4.82039 10.9401 4.65039 12.0001 4.65039C16.7901 4.65039 20.6701 8.53039 20.6701 13.3204C20.6701 18.1104 16.7901 21.9904 12.0001 21.9904C7.21008 21.9904 3.33008 18.1104 3.33008 13.3204C3.33008 11.5404 3.87008 9.88039 4.79008 8.50039",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M7.87012 5.32L10.7601 2",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),m.createElement("path",{d:"M7.87012 5.32031L11.2401 7.78031",stroke:"white",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),At=e=>m.createElement("svg",{width:17,height:17,viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("g",{clipPath:"url(#clip0_1044_6774)"},m.createElement("path",{d:"M8.50002 9.33047L12.0063 5.82422L13.0079 6.8258L8.50002 11.3336L3.99219 6.8258L4.99377 5.82422L8.50002 9.33047Z",fill:"white"})),m.createElement("defs",null,m.createElement("clipPath",{id:"clip0_1044_6774"},m.createElement("rect",{width:17,height:17,fill:"white"})))),Gr=C.memo(({defaultValue:e,onChange:t})=>{const[r,n]=C.useState(null),s=C.useRef(!1),a=C.useRef(0);return C.useEffect(()=>{if(!r)return;r.style.backgroundImage=`url("${Hr}")`;const o=()=>{s.current=!0},l=()=>{s.current=!1},c=g=>{if(a.current++,a.current%4||!s.current){a.current=0;return}const{width:E}=r.getBoundingClientRect(),u=g.movementX/E*(Number(r.max)-Number(r.min));t&&t({target:{value:u}})};return r.addEventListener("mousedown",o),window.addEventListener("mouseup",l),r.addEventListener("mousemove",c),()=>{r.removeEventListener("mousedown",o),window.removeEventListener("mouseup",l),r.removeEventListener("mousemove",c)}},[r]),f.jsx("input",{type:"range",min:"5",max:"25",defaultValue:e,onChange:t,ref:n,className:"wb-range",id:"wb-range"})}),zt=({settings:e,configure:t,undo:r,redo:n,closeWhiteboard:s,darkMode:a,hostMode:o,transparent:l,action:c})=>{const[g,E]=C.useState(le.PENCIL),u=C.useCallback(w=>{t({strokeColor:w})},[t]),_=()=>{t({cursorMode:ye.SELECTION}),E(le.MOUSE)},k=()=>{t({cursorMode:ye.PAINT,drawingForm:d.TRIANGLE}),E(le.SHAPE)},T=()=>{t({cursorMode:ye.ERASE}),E(le.ERASER)},b=()=>{t({cursorMode:ye.PAINT,drawingForm:d.TEXT}),E(le.TEXT)},X=()=>{t({cursorMode:ye.PAINT,drawingForm:d.PEN}),E(le.PENCIL)},O=w=>{t({fontSize:w})},N=C.useCallback(w=>{t({strokeWidth:Number(w.target.value)})},[t]),Y=C.useCallback(({color:w})=>f.jsx("div",{className:`wb-color ${e.strokeColor===w?"active":""}`,children:f.jsx("button",{style:{background:w},onClick:()=>u(w)})}),[e.strokeColor,u]),re=C.useCallback(()=>f.jsx("div",{className:"wb-color-picker",children:Or.map((w,F)=>f.jsx(Y,{color:w},`${w}-${F}`))}),[Y]);return f.jsxs("div",{className:`whiteboard-tools-container ${a?"dark":""}`,children:[f.jsxs("div",{className:`whiteboard-control ${l?"transparent hover:pointer-events-none":""} ${l&&c==null?"hover:pointer-events-auto":""}`,children:[f.jsxs("div",{className:"whiteboard-tools-options",children:[g===le.TEXT&&f.jsxs("div",{className:"wb-font-options",children:[f.jsxs("div",{className:"wb-tools-wrapper",children:[f.jsxs("button",{className:"wb-choose",children:[f.jsx("span",{children:e.fontFamily}),f.jsx(At,{})]}),f.jsx("div",{className:"wb-additional-wrapper",children:f.jsxs("div",{className:"wb-additional",children:[f.jsx("button",{className:`${e.fontFamily===Ee.ARIAL?"active":""} wb-list`,onClick:()=>t({fontFamily:Ee.ARIAL}),children:Ee.ARIAL}),f.jsx("button",{className:`${e.fontFamily===Ee.TIMES_NEW_ROMAN?"active":""} wb-list`,onClick:()=>t({fontFamily:Ee.TIMES_NEW_ROMAN}),children:Ee.TIMES_NEW_ROMAN}),f.jsx("button",{className:`${e.fontFamily===Ee.VERDANA?"active":""} wb-list`,onClick:()=>t({fontFamily:Ee.VERDANA}),children:Ee.VERDANA}),f.jsx("button",{className:`${e.fontFamily===Ee.COURIER_NEW?"active":""} wb-list`,onClick:()=>t({fontFamily:Ee.COURIER_NEW}),children:Ee.COURIER_NEW})]})})]}),f.jsxs("div",{className:"wb-tools-wrapper",children:[f.jsxs("button",{className:"wb-choose",children:[f.jsx("span",{children:e.fontSize}),f.jsx(At,{})]}),f.jsx("div",{className:"wb-additional-wrapper",children:f.jsxs("div",{className:"wb-additional",children:[f.jsx("button",{className:`wb-list ${e.fontSize==14?"active":""}`,onClick:()=>O(14),children:"14"}),f.jsx("button",{className:`wb-list ${e.fontSize==16?"active":""}`,onClick:()=>O(16),children:"16"}),f.jsx("button",{className:`wb-list ${e.fontSize==18?"active":""}`,onClick:()=>O(18),children:"18"}),f.jsx("button",{className:`wb-list ${e.fontSize==24?"active":""}`,onClick:()=>O(24),children:"24"}),f.jsx("button",{className:`wb-list ${e.fontSize==30?"active":""}`,onClick:()=>O(30),children:"30"})]})})]})]}),g===le.SHAPE&&f.jsxs(f.Fragment,{children:[f.jsx("button",{className:`wb triangle tip-bottom ${e.drawingForm===d.TRIANGLE?"active":""}`,"data-title":"Triangle",onClick:()=>t({drawingForm:d.TRIANGLE}),children:f.jsx(Wr,{})}),f.jsx("button",{className:`wb circle tip-bottom ${e.drawingForm===d.ELLIPSE?"active":""}`,"data-title":"Circle",onClick:()=>t({drawingForm:d.ELLIPSE}),children:f.jsx(Lr,{})}),f.jsx("button",{className:`wb square tip-bottom ${e.drawingForm===d.RECTANGLE?"active":""}`,"data-title":"Square",onClick:()=>t({drawingForm:d.RECTANGLE}),children:f.jsx(Dr,{})})]}),g===le.PENCIL&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"wb-tools-wrapper",children:f.jsx("button",{className:`wb pen tip-bottom ${e.drawingForm===d.PEN?"active":""}`,"data-title":"Pen",onClick:()=>t({drawingForm:d.PEN}),children:f.jsx(Ar,{})})}),f.jsx("div",{className:"wb-tools-wrapper",children:f.jsx("button",{className:`wb pen-2 tip-bottom ${e.drawingForm===d.PENCIL?"active":""}`,"data-title":"Pencil",onClick:()=>t({drawingForm:d.PENCIL}),children:f.jsx(Nr,{})})}),f.jsx("div",{className:"wb-tools-wrapper",children:f.jsx("button",{className:`wb pen-3 tip-bottom ${e.drawingForm===d.BRUSH?"active":""}`,"data-title":"Brush",onClick:()=>t({drawingForm:d.BRUSH}),children:f.jsx(Mr,{})})})]}),g===le.TEXT&&f.jsxs(f.Fragment,{children:[f.jsx("button",{className:`wb b tip-bottom ${e.bold?"active":""}`,"data-title":"Bold",onClick:()=>t({bold:!e.bold}),children:f.jsx(Tr,{})}),f.jsx("button",{className:`wb b tip-bottom ${e.italic?"active":""}`,onClick:()=>t({italic:!e.italic}),"data-title":"Italic",children:f.jsx(Sr,{})})]})]}),o&&f.jsxs("div",{className:"whiteboard-undo-redo",children:[f.jsx("button",{className:"wb undo tip-bottom","data-title":"Undo",onClick:r,children:f.jsx(Yr,{})}),f.jsx("button",{className:"wb redo tip-bottom","data-title":"Redo",onClick:n,children:f.jsx(Pr,{})})]}),s&&f.jsx("div",{className:"whiteboard-actions",children:f.jsx("button",{className:"whiteboard-action",onClick:s,children:"Close window"})})]}),f.jsxs("div",{className:`whiteboard-tools ${l?"transparent hover:pointer-events-none":""} ${l&&c==null?"hover:pointer-events-auto":""}`,children:[f.jsx("div",{className:"wb color-tooltip-wrapper",children:f.jsx("div",{className:"color-tooltip",style:{backgroundColor:e.strokeColor},children:f.jsx("div",{className:"wb-additional-wrapper",children:f.jsxs("div",{className:"wb-additional",children:[f.jsx(Gr,{defaultValue:e.strokeWidth,onChange:N}),f.jsx(re,{})]})})})}),o&&f.jsx("button",{className:`wb mouse ${g===le.MOUSE&&"active"}`,"data-title":"Mouse",onClick:_,children:f.jsx(xr,{})}),f.jsx("button",{className:`wb shape ${g===le.SHAPE&&"active"}`,"data-title":"Shape",onClick:k,children:f.jsx(Fr,{})}),f.jsx("button",{className:`wb eraser ${g===le.ERASER&&"active"}`,"data-title":"Eraser",onClick:T,children:f.jsx(yr,{color:"#4F29EC"})}),f.jsx("button",{className:`wb pencil ${g===le.PENCIL&&"active"}`,"data-title":"Pencil",onClick:X,children:f.jsx(Ir,{})}),f.jsx("button",{className:`wb text ${g===le.TEXT&&"active"}`,"data-title":"Text",onClick:b,children:f.jsx(Xr,{})})]})]})};let Qe;const Br=new Uint8Array(16);function $r(){if(!Qe&&(Qe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qe(Br)}const ae=[];for(let e=0;e<256;++e)ae.push((e+256).toString(16).slice(1));function Ur(e,t=0){return ae[e[t+0]]+ae[e[t+1]]+ae[e[t+2]]+ae[e[t+3]]+"-"+ae[e[t+4]]+ae[e[t+5]]+"-"+ae[e[t+6]]+ae[e[t+7]]+"-"+ae[e[t+8]]+ae[e[t+9]]+"-"+ae[e[t+10]]+ae[e[t+11]]+ae[e[t+12]]+ae[e[t+13]]+ae[e[t+14]]+ae[e[t+15]]}const Vr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),It={randomUUID:Vr};function Zt(e,t,r){if(It.randomUUID&&!e)return It.randomUUID();e=e||{};const n=e.random||(e.rng||$r)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Ur(n)}function ft({id:e,startingPoint:t,text:r,settings:n,canvasContext:s,textarea:a}){s.save(),s.font=`${n.fontSize}px ${n.fontFamily}`,s.textBaseline="top";let o=r,l="",c=0,g="";if(a)for(let T=1;T<=o.length;T++){l=o.slice(c,T);const{width:b}=s.measureText(l);b>=a.clientWidth&&(o=g.concat(l.concat(`
`).concat(o.slice(T))),T++,c=T,g=o.slice(0,c))}const{width:E}=s.measureText(o),u=o.split(`
`).length*n.lineHeight;s.restore();const _=t[0]+E,k=t[1]+u;return{drawingForm:d.TEXT,id:e||Zt(),startX:t[0],startY:t[1],endX:_,endY:k,settings:n,text:o,beingDrawn:!1}}function Ze({id:e,drawingPoints:t,settings:r,drawingForm:n,shiftKey:s=!1,beingDrawn:a=!0}){const o=t[0],l=t[t.length-1],[c,g]=l;let E=c,u=g,_={},k=n||r.drawingForm;switch(r.drawingForm){case d.ELLIPSE:{s&&(k=d.CIRCLE);break}case d.TRIANGLE:{E=Math.max(o[0]-(E-o[0]),E);break}case d.PENCIL:case d.PEN:case d.ERASER:case d.BRUSH:{_={points:t};break}}return{..._,settings:r,id:e||null,drawingForm:k,beingDrawn:a,startX:o[0],startY:o[1],endX:E,endY:u}}const ct=(e,t,r)=>[(e[0]-(t[0]*r.modifier+r.offset[0]))/r.modifier,(e[1]-(t[1]*r.modifier+r.offset[1]))/r.modifier],zr=(e,t,r)=>{let n={...e};switch(n.drawingForm){case d.PENCIL:case d.PEN:case d.ERASER:case d.BRUSH:{n.points=n.points.map(s=>ct(s,t,r));break}default:{const s=ct([n.startX,n.startY],t,r),a=ct([n.endX,n.endY],t,r);n.startX=s[0],n.startY=s[1],n.endX=a[0],n.endY=a[1];break}}return n},Zr=e=>({...e,id:e.id||Zt(),beingDrawn:!1}),qt=(e,t,r)=>{switch(t.drawingForm){case d.CIRCLE:case d.ELLIPSE:case d.LINE:case d.RECTANGLE:case d.TRIANGLE:return Ze({id:t.id,settings:t.settings,drawingPoints:[[t.startX*e,t.startY*e],[t.endX*e,t.endY*e]],beingDrawn:t.beingDrawn});case d.PEN:case d.PENCIL:case d.BRUSH:case d.ERASER:return Ze({id:t.id,settings:t.settings,drawingPoints:t.points.map(([n,s])=>[n*e,s*e]),beingDrawn:t.beingDrawn});case d.TEXT:return ft({id:t.id,startingPoint:[t.startX*e,t.startY*e],text:t.text,settings:t.settings,canvasContext:r})}};var _e=(e=>(e[e.ADD_ELEMENT=0]="ADD_ELEMENT",e[e.UNDO_ELEMENT=1]="UNDO_ELEMENT",e[e.REDO_ELEMENT=2]="REDO_ELEMENT",e[e.CLEAR_ELEMENTS=3]="CLEAR_ELEMENTS",e[e.DELETE_ELEMENT=4]="DELETE_ELEMENT",e[e.UPDATE_DRAWING_ELEMENT=5]="UPDATE_DRAWING_ELEMENT",e[e.FINALIZE_DRAWING_ELEMENT=6]="FINALIZE_DRAWING_ELEMENT",e[e.UPDATE_ELEMENT=7]="UPDATE_ELEMENT",e[e.CONFIGURE=8]="CONFIGURE",e))(_e||{});const qr=(e,t)=>{const r=e.elements[e.elements.length-1];switch(t.type){case 0:return{...e,elements:e.elements.find(({id:n})=>t.payload.id===n)?e.elements:[...e.elements,t.payload]};case 1:return{...e,elements:e.elements.slice(0,e.elements.length-1),undidElements:r?[...e.undidElements,r]:e.undidElements};case 2:{const n=e.undidElements[e.undidElements.length-1];return n?{...e,elements:[...e.elements,n],undidElements:e.undidElements.slice(0,e.undidElements.length-1)}:e}case 3:return{...e,elements:[]};case 4:return t.payload?{...e,elements:e.elements.filter(({id:n})=>n!==t.payload)}:e;case 5:return{...e,elements:[...e.elements.slice(0,e.elements.length-(r!=null&&r.beingDrawn?1:0)),t.payload],undidElements:[]};case 6:return{...e,elements:e.elements.length?[...e.elements.slice(0,e.elements.length-1),Zr(r)]:e.elements};case 7:{const n=e.elements.findIndex(({id:s})=>s===t.payload.id);return n===-1?e:{...e,elements:[...e.elements.slice(0,n),t.payload.element,...e.elements.slice(n+1,e.elements.length)],undidElements:[]}}case 8:return{...e,settings:{...e.settings,...t.payload}};default:return e}},Kr=(e,t)=>r=>{if(r.ctrlKey)switch(r.code){case"KeyZ":r.shiftKey?t():e();break;case"KeyY":t();break}},tt=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)),Pt=(e,t,r,n)=>{const s=tt(e,t)-(tt(e,r)+tt(t,r));return Math.abs(s)<n},gt=e=>{const t=e.endX-e.startX,r=e.endY-e.startY,n=Math.abs(t)<Math.abs(r)?t:r;let s=0,a=0,o=0,l=0;return e.drawingForm===d.CIRCLE?(o=Math.abs(n)/2,l=o,s=e.startX+Math.sign(t)*o,a=e.startY+Math.sign(r)*l):e.drawingForm===d.ELLIPSE&&(o=Math.abs(t)/2,l=Math.abs(r)/2,s=e.startX+t/2,a=e.startY+r/2),{center:[s,a],radiuses:[o,l]}},Et=(e,t)=>{let{center:[r,n],radiuses:[s,a]}=gt(t);return s+=t.settings.strokeWidth,a+=t.settings.strokeWidth,Math.pow(e[0]-r,2)/Math.pow(s,2)+Math.pow(e[1]-n,2)/Math.pow(a,2)<=1},Jr=(e,t)=>{const r=Et(e,t),n=Et(e,{...t,settings:{...t.settings,strokeWidth:0}});return r&&!n},Kt=20,Ie=(e,t,r)=>Math.abs(tt(e,t))<r,Qr=(e,t,r)=>{const{drawingForm:n,settings:{strokeWidth:s}}=r;if(n===d.RECTANGLE||n===d.LINE||n===d.TEXT||n===d.TRIANGLE||n===d.ELLIPSE||n===d.CIRCLE){const{startX:a,endX:o,startY:l,endY:c}=r;if(n===d.RECTANGLE||n===d.TEXT){const g=Math.min(a,o)-s/2,E=Math.max(a,o)+s/2,u=Math.min(l,c)-s/2,_=Math.max(l,c)+s/2;return e>=g&&e<=E&&t>=u&&t<=_}else if(n===d.TRIANGLE){const g=s*1.5,E=o-a,u=Math.abs(c-l)+g,_=E*2+g,T=l>c?t-2*(t-c):t,b=a-(o-a)-g,X=c+s/2-T,O=e-b,N=o+g-e,Y=Math.atan(u/(_/2)),re=Math.atan(X/O),w=Math.atan(X/N);return 0<=re&&re<=Y&&0<=w&&w<=Y}else return n===d.ELLIPSE||n===d.CIRCLE?Et([e,t],r):Pt([a,l],[o,c],[e,t],1)}else if(n===d.PEN||n===d.PENCIL||n===d.BRUSH)return!!r.points.some((o,l)=>{const c=r.points[l+1];return c?Pt(o,c,[e,t],Kt+s):!1})},en=(e,t,r)=>r.find(n=>Qr(e,t,n)),tn=(e,t,r,n=Kt)=>{const{settings:{strokeWidth:s}}=r;let a=0,o=0,l=[0,0],c=[0,0],g=0,E=0;const u=[e,t];switch(r.drawingForm){case d.LINE:case d.RECTANGLE:case d.TRIANGLE:case d.ELLIPSE:case d.CIRCLE:{g=r.startX,E=r.startY,c=[g,E],a=r.endX,o=r.endY,l=[a,o];break}}switch(r.drawingForm){case d.LINE:return Ie(u,c,n+s)?he.TOP_LEFT:Ie(u,l,n+s)?he.BOTTOM_RIGHT:null;case d.TRIANGLE:{const _=[g-(a-g),o];return Ie(u,c,n+s)?he.TOP_LEFT:Ie(u,_,n+s)?he.BOTTOM_LEFT:Ie(u,l,n+s)?he.BOTTOM_RIGHT:null}case d.RECTANGLE:{const _=[a,E],k=[g,o];return Ie(u,c,n+s)?he.TOP_LEFT:Ie(u,_,n+s)?he.TOP_RIGHT:Ie(u,k,n+s)?he.BOTTOM_LEFT:Ie(u,l,n+s)?he.BOTTOM_RIGHT:null}case d.ELLIPSE:case d.CIRCLE:return Jr([e,t],r)?he.BOTTOM_RIGHT:null;default:return null}},rn=(e,t,r)=>{let n=[[0,0]];const[s,a]=t;switch(e){case he.TOP_LEFT:{if(r.drawingForm===d.TRIANGLE){const o=r.startX+s;return[[o,r.startY+a],[Math.max(o-(r.endX-o),r.endX),r.endY]]}return[[r.startX+s,r.startY+a],[r.endX,r.endY]]}case he.TOP_RIGHT:return[[r.startX,r.startY+a],[r.endX+s,r.endY]];case he.BOTTOM_LEFT:{if(r.drawingForm===d.TRIANGLE){const o=r.endX-s,l=r.startX-(r.endX-r.startX)+s;return[[r.startX,r.startY],[Math.max(o,l),r.endY-a]]}return[[r.startX+s,r.startY],[r.endX,r.endY+a]]}case he.BOTTOM_RIGHT:{if(r.drawingForm===d.TRIANGLE){const o=r.endX+s,l=r.startX-(r.endX-r.startX)-s;return[[r.startX,r.startY],[Math.max(o,l),r.endY+a]]}return[[r.startX,r.startY],[r.endX+s,r.endY+a]]}default:return n}};function jt(e,t,r,n=s=>s){return e*n(.5-t*(.5-r))}function nn(e){return[-e[0],-e[1]]}function Le(e,t){return[e[0]+t[0],e[1]+t[1]]}function we(e,t){return[e[0]-t[0],e[1]-t[1]]}function Te(e,t){return[e[0]*t,e[1]*t]}function an(e,t){return[e[0]/t,e[1]/t]}function Be(e){return[e[1],-e[0]]}function Ot(e,t){return e[0]*t[0]+e[1]*t[1]}function sn(e,t){return e[0]===t[0]&&e[1]===t[1]}function on(e){return Math.hypot(e[0],e[1])}function ln(e){return e[0]*e[0]+e[1]*e[1]}function Ft(e,t){return ln(we(e,t))}function Jt(e){return an(e,on(e))}function cn(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function $e(e,t,r){let n=Math.sin(r),s=Math.cos(r),a=e[0]-t[0],o=e[1]-t[1],l=a*s-o*n,c=a*n+o*s;return[l+t[0],c+t[1]]}function mt(e,t,r){return Le(e,Te(we(t,e),r))}function Ht(e,t,r){return Le(e,Te(t,r))}var{min:Xe,PI:un}=Math,Dt=.275,Ue=un+1e-4;function dn(e,t={}){let{size:r=16,smoothing:n=.5,thinning:s=.5,simulatePressure:a=!0,easing:o=M=>M,start:l={},end:c={},last:g=!1}=t,{cap:E=!0,easing:u=M=>M*(2-M)}=l,{cap:_=!0,easing:k=M=>--M*M*M+1}=c;if(e.length===0||r<=0)return[];let T=e[e.length-1].runningLength,b=l.taper===!1?0:l.taper===!0?Math.max(r,T):l.taper,X=c.taper===!1?0:c.taper===!0?Math.max(r,T):c.taper,O=Math.pow(r*n,2),N=[],Y=[],re=e.slice(0,10).reduce((M,K)=>{let j=K.pressure;if(a){let W=Xe(1,K.distance/r),A=Xe(1,1-W);j=Xe(1,M+(A-M)*(W*Dt))}return(M+j)/2},e[0].pressure),w=jt(r,s,e[e.length-1].pressure,o),F,v=e[0].vector,se=e[0].point,G=se,H=se,z=G,ce=!1;for(let M=0;M<e.length;M++){let{pressure:K}=e[M],{point:j,vector:W,distance:A,runningLength:L}=e[M];if(M<e.length-1&&T-L<3)continue;if(s){if(a){let x=Xe(1,A/r),$=Xe(1,1-x);K=Xe(1,re+($-re)*(x*Dt))}w=jt(r,s,K,o)}else w=r/2;F===void 0&&(F=w);let S=L<b?u(L/b):1,V=T-L<X?k((T-L)/X):1;w=Math.max(.01,w*Math.min(S,V));let ue=(M<e.length-1?e[M+1]:e[M]).vector,J=M<e.length-1?Ot(W,ue):1,ie=Ot(W,v)<0&&!ce,fe=J!==null&&J<0;if(ie||fe){let x=Te(Be(v),w);for(let $=1/13,Q=0;Q<=1;Q+=$)H=$e(we(j,x),j,Ue*Q),N.push(H),z=$e(Le(j,x),j,Ue*-Q),Y.push(z);se=H,G=z,fe&&(ce=!0);continue}if(ce=!1,M===e.length-1){let x=Te(Be(W),w);N.push(we(j,x)),Y.push(Le(j,x));continue}let Re=Te(Be(mt(ue,W,J)),w);H=we(j,Re),(M<=1||Ft(se,H)>O)&&(N.push(H),se=H),z=Le(j,Re),(M<=1||Ft(G,z)>O)&&(Y.push(z),G=z),re=K,v=W}let B=e[0].point.slice(0,2),ne=e.length>1?e[e.length-1].point.slice(0,2):Le(e[0].point,[1,1]),me=[],Ce=[];if(e.length===1){if(!(b||X)||g){let M=Ht(B,Jt(Be(we(B,ne))),-(F||w)),K=[];for(let j=1/13,W=j;W<=1;W+=j)K.push($e(M,B,Ue*2*W));return K}}else{if(!(b||X&&e.length===1))if(E)for(let K=1/13,j=K;j<=1;j+=K){let W=$e(Y[0],B,Ue*j);me.push(W)}else{let K=we(N[0],Y[0]),j=Te(K,.5),W=Te(K,.51);me.push(we(B,j),we(B,W),Le(B,W),Le(B,j))}let M=Be(nn(e[e.length-1].vector));if(X||b&&e.length===1)Ce.push(ne);else if(_){let K=Ht(ne,M,w);for(let j=1/29,W=j;W<1;W+=j)Ce.push($e(K,ne,Ue*3*W))}else Ce.push(Le(ne,Te(M,w)),Le(ne,Te(M,w*.99)),we(ne,Te(M,w*.99)),we(ne,Te(M,w)))}return N.concat(Ce,Y.reverse(),me)}function hn(e,t={}){var r;let{streamline:n=.5,size:s=16,last:a=!1}=t;if(e.length===0)return[];let o=.15+(1-n)*.85,l=Array.isArray(e[0])?e:e.map(({x:k,y:T,pressure:b=.5})=>[k,T,b]);if(l.length===2){let k=l[1];l=l.slice(0,-1);for(let T=1;T<5;T++)l.push(mt(l[0],k,T/4))}l.length===1&&(l=[...l,[...Le(l[0],[1,1]),...l[0].slice(2)]]);let c=[{point:[l[0][0],l[0][1]],pressure:l[0][2]>=0?l[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],g=!1,E=0,u=c[0],_=l.length-1;for(let k=1;k<l.length;k++){let T=a&&k===_?l[k].slice(0,2):mt(u.point,l[k],o);if(sn(u.point,T))continue;let b=cn(T,u.point);if(E+=b,k<_&&!g){if(E<s)continue;g=!0}u={point:T,pressure:l[k][2]>=0?l[k][2]:.5,vector:Jt(we(u.point,T)),distance:b,runningLength:E},c.push(u)}return c[0].vector=((r=c[1])==null?void 0:r.vector)||[0,0],c}function fn(e,t={}){return dn(hn(e,t),t)}var gn=fn;function rt(e){"@babel/helpers - typeof";return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(e)}var En=/^\s+/,mn=/\s+$/;function R(e,t){if(e=e||"",t=t||{},e instanceof R)return e;if(!(this instanceof R))return new R(e,t);var r=pn(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}R.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,s,a,o,l;return r=t.r/255,n=t.g/255,s=t.b/255,r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*a+.7152*o+.0722*l},setAlpha:function(t){return this._a=Qt(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=Wt(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=Wt(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),s=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+s+"%)":"hsva("+r+", "+n+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var t=Xt(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=Xt(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),s=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+s+"%)":"hsla("+r+", "+n+"%, "+s+"%, "+this._roundA+")"},toHex:function(t){return Yt(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Cn(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Z(this._r,255)*100)+"%",g:Math.round(Z(this._g,255)*100)+"%",b:Math.round(Z(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Z(this._r,255)*100)+"%, "+Math.round(Z(this._g,255)*100)+"%, "+Math.round(Z(this._b,255)*100)+"%)":"rgba("+Math.round(Z(this._r,255)*100)+"%, "+Math.round(Z(this._g,255)*100)+"%, "+Math.round(Z(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:In[Yt(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+Gt(this._r,this._g,this._b,this._a),n=r,s=this._gradientType?"GradientType = 1, ":"";if(t){var a=R(t);n="#"+Gt(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,s=this._a<1&&this._a>=0,a=!r&&s&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return a?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return R(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Tn,arguments)},brighten:function(){return this._applyModification(Ln,arguments)},darken:function(){return this._applyModification(yn,arguments)},desaturate:function(){return this._applyModification(Rn,arguments)},saturate:function(){return this._applyModification(_n,arguments)},greyscale:function(){return this._applyModification(kn,arguments)},spin:function(){return this._applyModification(Sn,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Mn,arguments)},complement:function(){return this._applyCombination(xn,arguments)},monochromatic:function(){return this._applyCombination(An,arguments)},splitcomplement:function(){return this._applyCombination(Nn,arguments)},triad:function(){return this._applyCombination(Bt,[3])},tetrad:function(){return this._applyCombination(Bt,[4])}};R.fromRatio=function(e,t){if(rt(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=Ve(e[n]));e=r}return R(e,t)};function pn(e){var t={r:0,g:0,b:0},r=1,n=null,s=null,a=null,o=!1,l=!1;return typeof e=="string"&&(e=Fn(e)),rt(e)=="object"&&(Pe(e.r)&&Pe(e.g)&&Pe(e.b)?(t=vn(e.r,e.g,e.b),o=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Pe(e.h)&&Pe(e.s)&&Pe(e.v)?(n=Ve(e.s),s=Ve(e.v),t=wn(e.h,n,s),o=!0,l="hsv"):Pe(e.h)&&Pe(e.s)&&Pe(e.l)&&(n=Ve(e.s),a=Ve(e.l),t=bn(e.h,n,a),o=!0,l="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=Qt(r),{ok:o,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function vn(e,t,r){return{r:Z(e,255)*255,g:Z(t,255)*255,b:Z(r,255)*255}}function Xt(e,t,r){e=Z(e,255),t=Z(t,255),r=Z(r,255);var n=Math.max(e,t,r),s=Math.min(e,t,r),a,o,l=(n+s)/2;if(n==s)a=o=0;else{var c=n-s;switch(o=l>.5?c/(2-n-s):c/(n+s),n){case e:a=(t-r)/c+(t<r?6:0);break;case t:a=(r-e)/c+2;break;case r:a=(e-t)/c+4;break}a/=6}return{h:a,s:o,l}}function bn(e,t,r){var n,s,a;e=Z(e,360),t=Z(t,100),r=Z(r,100);function o(g,E,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?g+(E-g)*6*u:u<1/2?E:u<2/3?g+(E-g)*(2/3-u)*6:g}if(t===0)n=s=a=r;else{var l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;n=o(c,l,e+1/3),s=o(c,l,e),a=o(c,l,e-1/3)}return{r:n*255,g:s*255,b:a*255}}function Wt(e,t,r){e=Z(e,255),t=Z(t,255),r=Z(r,255);var n=Math.max(e,t,r),s=Math.min(e,t,r),a,o,l=n,c=n-s;if(o=n===0?0:c/n,n==s)a=0;else{switch(n){case e:a=(t-r)/c+(t<r?6:0);break;case t:a=(r-e)/c+2;break;case r:a=(e-t)/c+4;break}a/=6}return{h:a,s:o,v:l}}function wn(e,t,r){e=Z(e,360)*6,t=Z(t,100),r=Z(r,100);var n=Math.floor(e),s=e-n,a=r*(1-t),o=r*(1-s*t),l=r*(1-(1-s)*t),c=n%6,g=[r,o,a,a,l,r][c],E=[l,r,r,o,a,a][c],u=[a,a,l,r,r,o][c];return{r:g*255,g:E*255,b:u*255}}function Yt(e,t,r,n){var s=[Se(Math.round(e).toString(16)),Se(Math.round(t).toString(16)),Se(Math.round(r).toString(16))];return n&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function Cn(e,t,r,n,s){var a=[Se(Math.round(e).toString(16)),Se(Math.round(t).toString(16)),Se(Math.round(r).toString(16)),Se(er(n))];return s&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function Gt(e,t,r,n){var s=[Se(er(n)),Se(Math.round(e).toString(16)),Se(Math.round(t).toString(16)),Se(Math.round(r).toString(16))];return s.join("")}R.equals=function(e,t){return!e||!t?!1:R(e).toRgbString()==R(t).toRgbString()};R.random=function(){return R.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Rn(e,t){t=t===0?0:t||10;var r=R(e).toHsl();return r.s-=t/100,r.s=nt(r.s),R(r)}function _n(e,t){t=t===0?0:t||10;var r=R(e).toHsl();return r.s+=t/100,r.s=nt(r.s),R(r)}function kn(e){return R(e).desaturate(100)}function Tn(e,t){t=t===0?0:t||10;var r=R(e).toHsl();return r.l+=t/100,r.l=nt(r.l),R(r)}function Ln(e,t){t=t===0?0:t||10;var r=R(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),R(r)}function yn(e,t){t=t===0?0:t||10;var r=R(e).toHsl();return r.l-=t/100,r.l=nt(r.l),R(r)}function Sn(e,t){var r=R(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,R(r)}function xn(e){var t=R(e).toHsl();return t.h=(t.h+180)%360,R(t)}function Bt(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=R(e).toHsl(),n=[R(e)],s=360/t,a=1;a<t;a++)n.push(R({h:(r.h+a*s)%360,s:r.s,l:r.l}));return n}function Nn(e){var t=R(e).toHsl(),r=t.h;return[R(e),R({h:(r+72)%360,s:t.s,l:t.l}),R({h:(r+216)%360,s:t.s,l:t.l})]}function Mn(e,t,r){t=t||6,r=r||30;var n=R(e).toHsl(),s=360/r,a=[R(e)];for(n.h=(n.h-(s*t>>1)+720)%360;--t;)n.h=(n.h+s)%360,a.push(R(n));return a}function An(e,t){t=t||6;for(var r=R(e).toHsv(),n=r.h,s=r.s,a=r.v,o=[],l=1/t;t--;)o.push(R({h:n,s,v:a})),a=(a+l)%1;return o}R.mix=function(e,t,r){r=r===0?0:r||50;var n=R(e).toRgb(),s=R(t).toRgb(),a=r/100,o={r:(s.r-n.r)*a+n.r,g:(s.g-n.g)*a+n.g,b:(s.b-n.b)*a+n.b,a:(s.a-n.a)*a+n.a};return R(o)};R.readability=function(e,t){var r=R(e),n=R(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};R.isReadable=function(e,t,r){var n=R.readability(e,t),s,a;switch(a=!1,s=Hn(r),s.level+s.size){case"AAsmall":case"AAAlarge":a=n>=4.5;break;case"AAlarge":a=n>=3;break;case"AAAsmall":a=n>=7;break}return a};R.mostReadable=function(e,t,r){var n=null,s=0,a,o,l,c;r=r||{},o=r.includeFallbackColors,l=r.level,c=r.size;for(var g=0;g<t.length;g++)a=R.readability(e,t[g]),a>s&&(s=a,n=R(t[g]));return R.isReadable(e,n,{level:l,size:c})||!o?n:(r.includeFallbackColors=!1,R.mostReadable(e,["#fff","#000"],r))};var pt=R.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},In=R.hexNames=Pn(pt);function Pn(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function Qt(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Z(e,t){jn(e)&&(e="100%");var r=On(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function nt(e){return Math.min(1,Math.max(0,e))}function pe(e){return parseInt(e,16)}function jn(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function On(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Se(e){return e.length==1?"0"+e:""+e}function Ve(e){return e<=1&&(e=e*100+"%"),e}function er(e){return Math.round(parseFloat(e)*255).toString(16)}function $t(e){return pe(e)/255}var ke=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Pe(e){return!!ke.CSS_UNIT.exec(e)}function Fn(e){e=e.replace(En,"").replace(mn,"").toLowerCase();var t=!1;if(pt[e])e=pt[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=ke.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=ke.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=ke.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=ke.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=ke.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=ke.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=ke.hex8.exec(e))?{r:pe(r[1]),g:pe(r[2]),b:pe(r[3]),a:$t(r[4]),format:t?"name":"hex8"}:(r=ke.hex6.exec(e))?{r:pe(r[1]),g:pe(r[2]),b:pe(r[3]),format:t?"name":"hex"}:(r=ke.hex4.exec(e))?{r:pe(r[1]+""+r[1]),g:pe(r[2]+""+r[2]),b:pe(r[3]+""+r[3]),a:$t(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=ke.hex3.exec(e))?{r:pe(r[1]+""+r[1]),g:pe(r[2]+""+r[2]),b:pe(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function Hn(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}const et=(e,t)=>(e+t)/2;function Dn(e,t=!0){const r=e.length;if(r<4)return"";let n=e[0],s=e[1];const a=e[2];let o=`M${n[0].toFixed(2)},${n[1].toFixed(2)} Q${s[0].toFixed(2)},${s[1].toFixed(2)} ${et(s[0],a[0]).toFixed(2)},${et(s[1],a[1]).toFixed(2)} T`;for(let l=2,c=r-1;l<c;l++)n=e[l],s=e[l+1],o+=`${et(n[0],s[0]).toFixed(2)},${et(n[1],s[1]).toFixed(2)} `;return t&&(o+="Z"),o}const Xn=e=>{const r=Math.round(Math.random()*2*5),n=R(e);return(r>5?n.brighten(r-5):n.darken(r)).toHexString()},Wn=(e,t)=>{const r=[];let n=Math.round(e/3);const s=e/n;for(let a=0;a<n;a++){const o=a===0?0:s*a+Math.random()*s/2-s/2;r.push({distance:o,thickness:Math.random()*2+2,color:Xn(t)})}return r},ut=(e,t,r)=>[r[0]+e*Math.cos(t),r[1]+e*Math.sin(t)],Yn=(e,t)=>(Math.atan2(t[1]-e[1],t[0]-e[0])-Math.PI/2)%(Math.PI*2),Gn=(e,t,r)=>{const n=Yn(e,t);return r==null?n:r-Bn(r,n)},Bn=(e,t)=>{const r=Math.PI*2,n=(e-(t>0?t:t+r)+Math.PI)%r-Math.PI;return n<-Math.PI?n+r:n},$n=(e,t,r,n,s,a)=>{s.save(),s.beginPath(),s.moveTo(e[0],e[1]),s.strokeStyle=r.color,s.lineWidth=r.thickness,a||(s.lineCap="round",s.lineJoin="round",s.shadowColor=r.color,s.shadowBlur=r.thickness/2,s.quadraticCurveTo(n[0],n[1],t[0],t[1])),s.lineTo(t[0],t[1]),s.stroke(),s.restore()},Ut=(e,t,r,n,s,a)=>{const o=Math.sqrt(Math.pow(r-e,2)+Math.pow(n-t,2)),l=a?s/o:(o-s)/o;return[e+l*(r-e),t+l*(n-t)]},Un=(e,t)=>{let r,n,s,a,o,l,c,g,E=e.length,u=new Array(E);for(n=0;n<E;n++)r=n-1,s=n+1,r<0&&(r=E-1),s==E&&(s=0),a=e[r],o=e[n],l=e[s],c=Ut(a[0],a[1],o[0],o[1],t,!1),g=Ut(o[0],o[1],l[0],l[1],t,!0),u[n]=[c[0],c[1],o[0],o[1],g[0],g[1]];return u},dt=(e,t,r)=>{let n=[];n=Un(t,r);const s=n!=null&&n.length?n:t;let a,o,l=s.length;for(a=0;a<l;a++)o=s[a],a==0?(e.beginPath(),e.moveTo(o[0],o[1])):e.lineTo(o[0],o[1]),e.quadraticCurveTo(o[2],o[3],o[4],o[5]);e.closePath()},Vn=(e,t)=>{var n;const r=(n=e[e.length-1])==null?void 0:n.beingDrawn;for(let s=0;s<e.length;s++){const a=e[s];switch(a.drawingForm){case d.PENCIL:{t.save(),t.strokeStyle=a.settings.strokeColor,t.lineWidth=a.settings.strokeWidth/4,t.lineCap="round",t.lineJoin="round";for(let o=0;o<a.points.length;o++){const l=a.points[o];t.beginPath(),t.moveTo(l[0],l[1]);const c=a.points[o+1];c&&t.lineTo(c[0],c[1]),t.closePath(),t.stroke()}t.restore();break}case d.PEN:case d.ERASER:{const o=gn(a.points,{size:a.settings.strokeWidth}),l=Dn(o);t.save(),t.fillStyle=a.settings.strokeColor,t.fill(new Path2D(l)),t.restore();break}case d.BRUSH:{const{points:o,settings:{strokeWidth:l,strokeColor:c}}=a,g=Wn(l,c);let E=null,u,_,k,T;for(let b=0;b<o.length-1;b++){_=o[b],k=o[b+1],u=Gn(_,k,E);for(let X=0;X<g.length;X++){T=g[X];const O=ut(T.distance-l/2,E,_),N=ut(T.distance-l/2,u,k),Y=ut(T.distance-l/2,u,_);$n(O,N,T,Y,t,r)}E=u%(Math.PI*2)}break}case d.RECTANGLE:{t.save(),t.lineWidth=a.settings.strokeWidth,t.strokeStyle=a.settings.strokeColor,dt(t,[[a.startX,a.startY],[a.endX,a.startY],[a.endX,a.endY],[a.startX,a.endY]],10),t.stroke(),t.restore();break}case d.TRIANGLE:{t.save(),t.lineWidth=a.settings.strokeWidth,t.strokeStyle=a.settings.strokeColor,dt(t,[[a.startX,a.startY],[a.endX,a.endY],[a.startX-(a.endX-a.startX),a.endY]],10),t.stroke(),t.restore();break}case d.LINE:{t.save(),t.lineWidth=a.settings.strokeWidth,t.strokeStyle=a.settings.strokeColor,dt(t,[[a.startX,a.startY],[a.endX,a.endY]],10),t.stroke(),t.restore();break}case d.CIRCLE:{const{center:[o,l],radiuses:[c]}=gt(a);t.save(),t.lineWidth=a.settings.strokeWidth,t.strokeStyle=a.settings.strokeColor,t.beginPath(),t.ellipse(o,l,c,c,0,0,2*Math.PI),t.stroke(),t.restore();break}case d.ELLIPSE:{const{center:[o,l],radiuses:[c,g]}=gt(a);t.save(),t.lineWidth=a.settings.strokeWidth,t.strokeStyle=a.settings.strokeColor,t.beginPath(),t.ellipse(o,l,c,g,0,0,2*Math.PI),t.stroke(),t.restore();break}case d.TEXT:{const o=a.settings.lineHeight;t.save(),t.font=`${a.settings.bold?"bold":""} ${a.settings.italic?"italic":""} ${a.settings.fontSize}px ${a.settings.fontFamily}`,t.fillStyle=a.settings.strokeColor,t.textBaseline="top",a.text.split(`
`).forEach((c,g)=>{t.fillText(c,a.startX,a.startY+g*o)}),t.restore();break}}}},tr=({settings:e,transparent:t,panZoomDisabled:r,receivedElement:n,scaleReturnedElement:s})=>{const[a,o]=C.useReducer(qr,{elements:[],undidElements:[],settings:e}),{elements:l,settings:c}=a,[g,E]=C.useState(),[u,_]=C.useState(null),[k,T]=C.useState([0,0]),[b,X]=C.useState({modifier:1,offset:[0,0]}),[O,N]=C.useState(),[Y,re]=C.useState(0),w=C.useRef([]),F=C.useRef(null),v=C.useRef(null),se=C.useRef(null),G=C.useRef(null),H=C.useCallback((A,L,S)=>{if(!v.current)return[0,0];const V=(S||k)[0]*b.modifier+b.offset[0],ue=(S||k)[1]*b.modifier+b.offset[1],J=v.current.getBoundingClientRect(),ie=A-J.left,fe=L-J.top;return[(ie-V)/b.modifier,(fe-ue)/b.modifier]},[k,b]),z=C.useCallback((A,L)=>{if(!v.current)return[0,0];const S=k[0]*b.modifier+b.offset[0],V=k[1]*b.modifier+b.offset[1],ue=v.current.getBoundingClientRect(),J=A*b.modifier+S+ue.left,ie=L*b.modifier+V+ue.top;return[J,ie]},[k,b]),ce=C.useCallback((A,L)=>{const S=F.current;if(!S)return;const V=z(L[0],L[1]);S.style.display="block",S.style.fontWeight=c.bold?"bold":"",S.style.fontStyle=c.italic?"italic":"",S.style.left=`${V[0]}px`,S.style.top=`${V[1]}px`,S.style.width=`${Math.max(300,(A[0]-L[0])*b.modifier)-20}px`,S.style.height=`${Math.max(70,(A[1]-L[1])*b.modifier)-20}px`,S.style.fontSize=`${c.fontSize*b.modifier}px`},[z]),B=C.useCallback(()=>{G.current=new Date().getTime(),setTimeout(()=>{const A=new Date().getTime();typeof G.current=="number"&&A-G.current>=900&&(re(L=>(L||0)+1),G.current=null)},1e3)},[]),ne=v.current?null:A=>{A&&(v.current=A)},me=C.useCallback(()=>{o({type:_e.REDO_ELEMENT})},[]),Ce=C.useCallback(()=>{o({type:_e.UNDO_ELEMENT})},[]),M=C.useCallback(A=>{o({type:_e.CONFIGURE,payload:A})},[]),K=C.useCallback(A=>{var ue;if(!v.current)return;const L=H(A.clientX,A.clientY);w.current=[L];const S=F.current,V=((ue=S==null?void 0:S.style)==null?void 0:ue.display)==="block";if(S&&V){const J=S.getBoundingClientRect(),ie=(S.value||"").trim();if(ie){const fe=v.current.getContext("2d"),Re=ft({startingPoint:H(J.x,J.y),text:ie,settings:c,canvasContext:fe,textarea:S});o({type:_e.ADD_ELEMENT,payload:Re})}S.style.display="none",S.style.width="0px",S.style.height="0px",S.style.resize="both",S.value="",E(null)}switch(c.cursorMode){case ye.ERASE:E(q.ERASING);break;case ye.PAINT:c.drawingForm===d.TEXT?V||E(q.CREATING_TEXTBOX):E(q.DRAWING);break;case ye.SELECTION:{if(!L)break;const J=en(L[0],L[1],l||[]);if(J){const ie=tn(L[0],L[1],J);ie!==null?(se.current=ie,E(q.RESIZING)):E(q.MOVING),_(J)}else _(null),E(q.PANNING);break}}},[H,c,l]),j=C.useCallback((A=!0)=>{const L=v.current;if(!L)return;const S=L.getContext("2d");if(!S)return;const V=L.getBoundingClientRect();t?S.clearRect(0,0,V.width,V.height):(S.save(),S.fillStyle="white",S.fillRect(0,0,V.width,V.height),S.restore()),A&&(o({type:_e.CLEAR_ELEMENTS}),X({modifier:1,offset:[0,0]}),T([0,0]),N(null))},[t]),W=C.useCallback(()=>{var L;j(!1);const A=(L=v.current)==null?void 0:L.getContext("2d");!l||!A||Vn(l,A)},[l,j]);return C.useEffect(()=>(window.addEventListener("resize",B),()=>{window.removeEventListener("resize",B)}),[B]),C.useEffect(()=>{typeof Y=="number"&&(W(),re(null))},[W,Y]),C.useEffect(()=>{const A=setInterval(()=>{if(!v.current)return;const L=v.current.getContext("2d");(v.current.width||v.current.height)&&L.drawImage(v.current,0,0)},100);return()=>{clearInterval(A)}},[]),C.useEffect(()=>{n&&o({type:_e.ADD_ELEMENT,payload:zr(n,k,b)})},[n,k,b]),C.useLayoutEffect(()=>{if(!v.current)return;const L=v.current.getContext("2d");L&&(j(!1),L.save(),L.translate(k[0]*b.modifier+b.offset[0],k[1]*b.modifier+b.offset[1]),L.scale(b.modifier,b.modifier),W(),L.restore())},[k,b,j,W]),C.useLayoutEffect(()=>{var ie,fe,Re;const A=x=>{var Me;const $=(Me=v.current)==null?void 0:Me.getContext("2d");if(g==null||!$||!v.current)return;const Q=H(x.clientX,x.clientY);switch(g){case q.DRAWING:case q.ERASING:{Q&&w.current.push(Q);const oe={drawingPoints:w.current,settings:c,shiftKey:x.shiftKey};g===q.ERASING&&(oe.settings={...oe.settings,drawingForm:d.ERASER,strokeColor:"#fff"});const ve=Ze(oe);o({type:_e.UPDATE_DRAWING_ELEMENT,payload:ve});break}case q.CREATING_TEXTBOX:{if(!F.current)break;const ve=w.current[0];ce(Q,ve);break}case q.MOVING:case q.RESIZING:case q.PANNING:{const oe=H(x.clientX,x.clientY,g===q.PANNING?[0,0]:k),ve=w.current[0][0],Ae=w.current[0][1],qe=oe?oe[0]:0,Ke=oe?oe[1]:0,xe=qe-ve,je=Ke-Ae;if(g===q.PANNING){T([xe,je]);return}if(!u)break;oe&&w.current.push(oe);let Fe={},Ne=[[0,0]];g===q.MOVING&&(u.drawingForm===d.PEN||u.drawingForm===d.PENCIL||u.drawingForm===d.BRUSH)?(Ne=u.points.map(Je=>[Je[0]+xe,Je[1]+je]),Fe=Ze({id:u.id,drawingPoints:Ne,settings:u.settings})):(u.drawingForm===d.LINE||u.drawingForm===d.RECTANGLE||u.drawingForm===d.TEXT||u.drawingForm===d.TRIANGLE||u.drawingForm===d.CIRCLE||u.drawingForm===d.ELLIPSE)&&(g===q.MOVING?Ne=[[u.startX+xe,u.startY+je],[u.endX+xe,u.endY+je]]:g===q.RESIZING&&se.current!==null&&(u.drawingForm===d.LINE||u.drawingForm===d.RECTANGLE||u.drawingForm===d.TRIANGLE||u.drawingForm===d.ELLIPSE||u.drawingForm===d.CIRCLE)&&(Ne=rn(se.current,[xe,je],u)),u.drawingForm===d.TEXT?Fe=ft({id:u.id,startingPoint:Ne[0],text:u.text,settings:c,canvasContext:$}):Fe=Ze({id:u.id,drawingPoints:Ne,settings:u.settings,drawingForm:u.drawingForm})),o({type:_e.UPDATE_ELEMENT,payload:{id:u.id,element:Fe}});break}}},L=x=>{r||(x.preventDefault(),x.shiftKey?T($=>[$[0]+x.deltaY*.1,$[1]]):x.altKey?T($=>[$[0],$[1]+x.deltaY*.1]):(x.ctrlKey||x.metaKey)&&v.current&&X($=>{const Q=H(x.clientX,x.clientY),Me=Math.min(Math.max($.modifier-x.deltaY*1e-4,.01),2),oe=$.modifier-Me,ve=$.offset[0]+Q[0]*oe,Ae=$.offset[1]+Q[1]*oe;return{modifier:Me,offset:[ve,Ae]}}))},S=x=>{if(g!==q.CREATING_TEXTBOX)setTimeout(()=>o({type:_e.FINALIZE_DRAWING_ELEMENT}));else{const $=F.current,Q=H(x.clientX,x.clientY);if(!$)return;if($.style.display!=="block"){const Me=w.current[0];ce(Q,Me)}}E(null)},V=()=>{const x=F.current;x&&(x.style.height=`${x.scrollHeight}px`)},ue=()=>{if(u&&u.drawingForm===d.TEXT){const x=F.current,$=[u.startX,u.startY],Q=[u.endX,u.endY];o({type:_e.DELETE_ELEMENT,payload:u.id}),ce(Q,$),x.value=u.text,x.style.height="auto",x.style.width="auto",V()}};(ie=v.current)==null||ie.addEventListener("mousemove",A),(fe=v.current)==null||fe.addEventListener("wheel",L),(Re=v.current)==null||Re.addEventListener("dblclick",ue),window.addEventListener("mouseup",S);const J=Kr(Ce,me);return document.addEventListener("keydown",J),document.addEventListener("keyup",V),()=>{var x,$,Q;(x=v.current)==null||x.removeEventListener("mousemove",A),($=v.current)==null||$.removeEventListener("wheel",L),(Q=v.current)==null||Q.removeEventListener("dblclick",ue),window.removeEventListener("mouseup",S),document.removeEventListener("keydown",J),document.removeEventListener("keyup",V)}},[g,c,Ce,me,u,k,H,z,ce,b.modifier,r]),C.useEffect(()=>{var S;const A=l.filter(({beingDrawn:V})=>!V).slice(-1)[0],L=(S=v.current)==null?void 0:S.getContext("2d");if(A&&A.id!==(O==null?void 0:O.id)&&s&&L){const V=qt(s,A,L);N(V)}},[l,s,O]),{init:ne,onMouseDown:K,clear:j,settings:c,configure:M,undo:Ce,redo:me,action:g,textareaRef:F,scale:b,setScale:X,newElement:O,canvas:v==null?void 0:v.current}},rr=e=>{if(!e)return{width:0,height:0};let t=e.videoWidth/e.videoHeight,r=e.offsetWidth,n=e.offsetHeight;return r/n>t?r=n*t:n=r/t,{width:r,height:n}},zn=({onElementAdd:e,videoElement:t,darkMode:r})=>{const[n,s]=C.useState(),{init:a,onMouseDown:o,clear:l,settings:c,configure:g,newElement:E,textareaRef:u}=tr({settings:Vt,transparent:!0,panZoomDisabled:!0,scaleReturnedElement:n}),[_,k]=C.useState(),[T,b]=C.useState({width:0,height:0}),X=C.useCallback(N=>{(N.width||N.height)&&b(N)},[]),O=C.useRef(null);return C.useEffect(()=>{!_||!a||a(_)},[_,a]),C.useEffect(()=>(_==null||_.addEventListener("mousedown",o),()=>{_==null||_.removeEventListener("mousedown",o)}),[_,o]),C.useEffect(()=>{E&&e(E),setTimeout(()=>{l()},2e3)},[E,e,l]),C.useEffect(()=>{if(t){let N,Y;if(!_)return;const re=()=>{const w=rr(t);if(O.current){const F=O.current.getBoundingClientRect(),v={width:F.width/w.width,height:(F.height-lt)/w.height},se={width:F.width-w.width,height:F.height-lt-w.height};let G=w.width,H=w.height;if(v.width<1||v.height<1)if(v.width<1&&v.height<1){const ce=v.width<v.height?"width":"height",B=v[ce];G=w.width*B,H=w.height*B,X({width:G,height:H})}else v.width<1?(G=w.width*v.width,H=w.height*v.width,X({width:G,height:H})):v.height<1&&(G=w.width*v.height,H=w.height*v.height,X({width:G,height:H}));else if(F.width>=We&&F.height-lt>=ze&&!(_.width===We&&_.height===ze))G=We,H=ze,X({width:G,height:H});else if(Math.abs(se.width)>=3&&w.width-_.height<=1||Math.abs(se.height)>=3&&w.height-_.height<=1){const ce=v.width<v.height?"width":"height",B=v[ce];G=w.width*B,H=w.height*B,X({width:G,height:H})}s(We/G);const z=t.getBoundingClientRect();_.style.top=`${(F.height-z.height)/2}px`,t.style.scale=String(G/w.width),t.style.position="relative",t.style.top=`${(F.height-z.height)/2}px`}};return N=new ResizeObserver(re),N.observe(t),T.width||T.height||re(),Y=setInterval(re,1e3),()=>{N.disconnect(),clearTimeout(Y)}}},[t,T,_,X]),f.jsxs("div",{className:"absolute top-0 flex items-center justify-center w-full h-full",ref:O,children:[f.jsx("canvas",{style:{width:`${T.width}px`,height:`${T.height}px`},className:"relative",width:T.width,height:T.height,ref:k}),f.jsx(zt,{configure:g,settings:c,darkMode:r,hostMode:!1}),c.drawingForm===d.TEXT&&f.jsx("textarea",{ref:u,className:"hidden fixed bg-gray-50 focus:bg-gray-100",id:"text-input",style:{fontSize:`${c.fontSize}px`,fontFamily:c.fontFamily,lineHeight:`${c.lineHeight}px`,color:c.strokeColor}})]})},Zn=({setCanvasStream:e,isActive:t,receivedElement:r,closeWhiteboard:n,darkMode:s,isInForeground:a,transparent:o,fullscreen:l})=>{const[c,g]=C.useState(1),[E,u]=C.useState(),_=C.useMemo(()=>r&&E?qt(c,r,E.getContext("2d")):r,[c,r,E]),{init:k,onMouseDown:T,settings:b,configure:X,undo:O,redo:N,action:Y,textareaRef:re,clear:w,canvas:F}=tr({settings:Vt,receivedElement:_,transparent:o}),[v,se]=C.useState(),G=C.useRef(null);C.useEffect(()=>{w(),F&&(t&&l&&(F.width=window.screen.width,F.height=window.screen.height,g(1)),t||(F.getContext("2d"),se(F.captureStream(jr))))},[t,F,l]),C.useEffect(()=>(v!=null&&v.active&&e&&(e(v),v.getVideoTracks()[0].onmute=()=>{v.getTracks().forEach(z=>z.stop())}),()=>{v&&(!v.active||v.getVideoTracks()[0].muted)&&v.getTracks().forEach(z=>z.stop())}),[v,e]);const H=z=>{z&&(u(z),k&&k(z))};return f.jsxs("div",{className:`
    max-h-screen h-full w-full overflow-hidden absolute top-0 flex justify-center items-end
    ${t?"":"hidden"}
    ${a?"z-10":""}
    ${Y!==null?"select-none":""}
    ${o?"bg-transparent":"bg-black"}
    ${Y===q.MOVING?"cursor-move":Y===q.RESIZING?"cursor-nwse-resize":Y===q.PANNING?"cursor-grabbing":b.cursorMode===ye.SELECTION?"cursor-pointer":""}
    `,ref:G,children:[f.jsx("canvas",{onMouseDown:T,ref:H,width:We,height:ze,className:"relative"}),f.jsx(zt,{configure:X,settings:b,undo:O,redo:N,closeWhiteboard:n,darkMode:s,hostMode:!0,transparent:o,action:Y}),f.jsx("textarea",{ref:re,className:"hidden fixed bg-gray-50 focus:bg-gray-100",id:"text-input",style:{fontSize:`${b.fontSize}px`,fontFamily:b.fontFamily,lineHeight:`${b.lineHeight}px`,color:b.strokeColor}})]})};exports.DEFAULT_WHITEBOARD_HEIGHT=ze;exports.DEFAULT_WHITEBOARD_WIDTH=We;exports.WhiteboardStreamController=zn;exports.default=Zn;exports.getVideoDimensions=rr;
//# sourceMappingURL=index.cjs.map
